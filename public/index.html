<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Socya - Sistema de Planificación</title>
    <!-- Estilos del proyecto de planificación -->
    <link rel="stylesheet" href="../src/App.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
    <!-- Estilos del dashboard -->
    <link rel="stylesheet" href="../libs/gridstack.min.css" />
    <link rel="stylesheet" href="../src/styles.css" />
    <!-- Iconos Font Awesome para el dashboard -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  </head>
  <body>
    <!-- Configuración editable del UI (opcional). Eliminado para simplificar -->
    <!-- Plantilla HTML editable del menú (manteniendo estética original) -->
    <template id="sidebar-template">
      <nav class="sidebar-menu">
        <!-- Internos: usar data-page; El script añadirá activo y manejadores -->
        <a href="./dashboard.html" class="sidebar-item" data-page="dashboard"><span class="sidebar-icon" data-lucide="layout-dashboard"></span><span>Dashboards</span></a>
        <a href="./index.html" class="sidebar-item" data-page="planning"><span class="sidebar-icon" data-lucide="calendar"></span><span>Planificación</span></a>
        <!-- Externos: usar href y target -->
        <a href="https://drive.google.com/file/d/1sG94XW0CLRHV3pqKZxALqc8Q4Pq2EnRA/view" class="sidebar-item" target="_blank" rel="noopener"><span class="sidebar-icon" data-lucide="file-text"></span><span>Manual Interactivo</span></a>
        <a href="https://drive.google.com/file/d/1YnlgdMOOAyz80l8D66bHhvPe0jNTkq5W/view" class="sidebar-item" target="_blank" rel="noopener"><span class="sidebar-icon" data-lucide="shield"></span><span>Política de seguridad</span></a>
        <a href="#" class="sidebar-item" data-page="documents"><span class="sidebar-icon" data-lucide="folder-open"></span><span>Documentos de operaciones TI</span></a>
      </nav>
      <div class="sidebar-footer">
        <button id="admaButton" type="button" class="sidebar-item adma-btn">
          <span class="sidebar-icon" data-lucide="rocket"></span>
          <span>ADMA</span>
        </button>
      </div>
    </template>
    <!-- Plantilla HTML editable del banner -->
    <template id="header-template">
      <p class="welcome-text">Bienvenido a la mesa de ayuda, Juan</p>
      <img src="../img/Usuario1.png" alt="Ilustración" class="welcome-figure" />
    </template>
    <!-- Plantilla HTML editable del contenido principal (Planificación) -->
    <template id="planning-template">
      <div class="planning-layout">
        <div class="calendar-section"><div id="calendar-root"></div></div>
        <div class="tasks-section"><div id="tasks-root"></div></div>
      </div>
      
      <!-- Flechas globales: ahora se renderizan desde main.js para todas las vistas -->
      
    </template>
    <template id="adma-template">
      <section class="admin-menu" aria-label="Menú administrativo">
        <header class="admin-menu-header">
          <h2>Menú administrativo</h2>
        </header>
        <div class="admin-menu-grid">
          <div class="admin-item" role="button" tabindex="0" data-action="config-site">
            <span class="admin-icon" data-lucide="settings"></span>
            <span>Configurar Sitio</span>
          </div>
          <div class="admin-item" role="button" tabindex="0" data-action="test-config">
            <span class="admin-icon" data-lucide="check-circle-2"></span>
            <span>Probar configuración</span>
          </div>
          <div class="admin-item" role="button" tabindex="0" data-action="config-mail">
            <span class="admin-icon" data-lucide="mail"></span>
            <span>Configurar Mensajes de correo</span>
          </div>
          <div class="admin-item" role="button" tabindex="0" data-action="change-admin-pass">
            <span class="admin-icon" data-lucide="key-round"></span>
            <span>Cambiar la contraseña del administrador</span>
          </div>
          <div class="admin-item" role="button" tabindex="0" data-action="manage-users">
            <span class="admin-icon" data-lucide="users"></span>
            <span>Administrar Usuarios</span>
          </div>
          <div class="admin-item" role="button" tabindex="0" data-action="manage-categories">
            <span class="admin-icon" data-lucide="tags"></span>
            <span>Administrar Categorías</span>
          </div>
          <div class="admin-item" role="button" tabindex="0" data-action="manage-departments">
            <span class="admin-icon" data-lucide="building-2"></span>
            <span>Administrar Departamentos</span>
          </div>
          <div class="admin-item" role="button" tabindex="0" data-action="manage-priorities">
            <span class="admin-icon" data-lucide="list-checks"></span>
            <span>Administrar Prioridades</span>
          </div>
          <div class="admin-item" role="button" tabindex="0" data-action="manage-states">
            <span class="admin-icon" data-lucide="workflow"></span>
            <span>Administrar Estados</span>
          </div>
        </div>
      </section>
    </template>
    <template id="adma-config-template">
      <section class="admin-config" aria-label="Configuración del sitio">
        <header class="admin-config-header">
          <h2>Configuración</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
            <button type="button" class="admin-config-btn primary" data-action="save"><span data-lucide="save"></span><span>Guardar</span></button>
          </div>
        </header>
        <form class="admin-form" id="siteConfigForm" novalidate>
          <div class="form-grid two">
            <div class="form-field">
              <label for="cfgSiteName">Nombre del sitio</label>
              <input id="cfgSiteName" type="text" placeholder="">
            </div>
            <div class="form-field">
              <label for="cfgBaseUrl">Base URL</label>
              <input id="cfgBaseUrl" type="url" placeholder="https://">
            </div>
            <div class="form-field">
              <label for="cfgAdminName">Nombre del administrador</label>
              <input id="cfgAdminName" type="text" placeholder="">
            </div>
            <div class="form-field">
              <label for="cfgAdminEmail">Correo del administrador</label>
              <input id="cfgAdminEmail" type="email" placeholder="soporte@socya.org.co">
            </div>
            <div class="form-field">
              <label for="cfgBaseEmail">Correo base</label>
              <input id="cfgBaseEmail" type="email" placeholder="@socya.org.co">
            </div>
            <div class="form-field">
              <label for="cfgMailType">Tipo de correo</label>
              <select id="cfgMailType">
                <option value="disabled">Disabled</option>
                <option value="cdonts">CDONTS</option>
                <option value="jmail">JMail</option>
                <option value="aspemail">ASPEmail</option>
                <option value="aspmail">ASPMail</option>
                <option value="cdosys" selected>CDOSYS</option>
              </select>
            </div>
            <div class="form-field">
              <label for="cfgSmtp">Servidor SMTP</label>
              <input id="cfgSmtp" type="text" placeholder="192.168.2.8">
            </div>
            <div class="form-field">
              <label for="cfgLocatorPriority">Nivel de prioridad del localizador</label>
              <select id="cfgLocatorPriority">
                <option value="disabled">Deshabilitado</option>
                <option value="high">Alta</option>
                <option value="medium">Media</option>
                <option value="low">Baja</option>
              </select>
            </div>
            <div class="form-field">
              <label for="cfgNotifyUser">Enviar un correo al usuario cuando haya actualizaciones</label>
              <select id="cfgNotifyUser">
                <option value="si">SI</option>
                <option value="no">NO</option>
              </select>
            </div>
            <div class="form-field">
              <label for="cfgKnowledgeAccess">Habilitar al usuario la base de conocimientos</label>
              <select id="cfgKnowledgeAccess">
                <option value="disable">Deshabilitar</option>
                <option value="representatives">Solo representantes</option>
                <option value="users_representatives">Usuarios/representantes</option>
                <option value="any">Cualquiera</option>
              </select>
            </div>
            <div class="form-field">
              <label for="cfgKnowledgeSql">Búsquedas complejas por SQL a la base de conocimientos</label>
              <select id="cfgKnowledgeSql">
                <option value="disable">Deshabilitar</option>
                <option value="enable">Habilitar</option>
              </select>
            </div>
            <div class="form-field">
              <label for="cfgDefaultPriority">Prioridad por omisión</label>
              <select id="cfgDefaultPriority">
                <option value="low">Baja</option>
                <option value="medium">Media</option>
                <option value="high">Alta</option>
              </select>
            </div>
            <div class="form-field">
              <label for="cfgDefaultState">Estado por omisión</label>
              <select id="cfgDefaultState">
                <option value="solicitado">Solicitado</option>
                <option value="en_tramite">En tramite</option>
                <option value="en_cotizacion">En cotizacion</option>
                <option value="esperando_aprobacion">Esperando aprobacion</option>
                <option value="solicitado_proveedor">Solicitado al proveedor</option>
                <option value="en_espera_usuario">En espera de usuario</option>
                <option value="cerrado_sin_solucion">Cerrado sin solucion</option>
              </select>
            </div>
            <div class="form-field">
              <label for="cfgClosedState">Estado cerrado</label>
              <select id="cfgClosedState">
                <option value="solicitado">Solicitado</option>
                <option value="en_tramite">En tramite</option>
                <option value="en_cotizacion">En cotizacion</option>
                <option value="esperando_aprobacion">Esperando aprobacion</option>
                <option value="solicitado_proveedor">Solicitado al proveedor</option>
                <option value="en_espera_usuario">En espera de usuario</option>
                <option value="solucionado">Solucionado</option>
                <option value="cerrado_sin_solucion">Cerrado sin solucion</option>
              </select>
            </div>
            <div class="form-field">
              <label for="cfgAuthType">Tipo de autenticación</label>
              <select id="cfgAuthType">
                <option value="nt">NT Authentication</option>
                <option value="database">Database</option>
                <option value="external">External Authentication</option>
              </select>
            </div>
            <div class="form-field">
              <label for="cfgUserSelection">Use selección de usuario</label>
              <select id="cfgUserSelection">
                <option value="no">NO</option>
                <option value="si">SI</option>
              </select>
            </div>
            <div class="form-field">
              <label for="cfgInOutBoard">Usar tablero In/Out</label>
              <select id="cfgInOutBoard">
                <option value="no">NO</option>
                <option value="si">SI</option>
              </select>
            </div>
            <div class="form-field">
              <label for="cfgAllowImage">Permitir cargar imagen</label>
              <select id="cfgAllowImage">
                <option value="no">NO</option>
                <option value="si">SI</option>
              </select>
            </div>
            <div class="form-field">
              <label for="cfgMaxImage">Tamaño máximo de la imagen</label>
              <input id="cfgMaxImage" type="number" min="1" step="1" placeholder="100000">
            </div>
          </div>
        </form>
      </section>
    </template>
    <template id="adma-change-pass-template">
      <section class="admin-config" aria-label="Cambiar la contraseña del administrador">
        <header class="admin-config-header">
          <h2>Cambiar la contraseña del administrador</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
            <button type="button" class="admin-config-btn primary" data-action="save-pass"><span data-lucide="save"></span><span>Grabar</span></button>
          </div>
        </header>
        <form class="admin-form" id="changeAdminPassForm" novalidate>
          <div class="form-grid two">
            <div class="form-field">
              <label for="adminPassCurrent">Contraseña actual</label>
              <input id="adminPassCurrent" type="password" autocomplete="current-password" placeholder="">
            </div>
            <div class="form-field">
              <label for="adminPassNew">Nueva contraseña</label>
              <input id="adminPassNew" type="password" autocomplete="new-password" placeholder="">
            </div>
            <div class="form-field">
              <label for="adminPassConfirm">Confirme la contraseña</label>
              <input id="adminPassConfirm" type="password" autocomplete="new-password" placeholder="">
            </div>
          </div>
        </form>
      </section>
    </template>
    <template id="adma-users-template">
      <section class="admin-config" aria-label="Administrar usuarios">
        <header class="admin-config-header">
          <h2>Administrar usuarios</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
          </div>
        </header>
        <form class="admin-form">
          <div class="form-grid one users-grid">
            <div class="form-field">
              <label>Lista de usuarios</label>
              <div class="users-toolbar">
                <input id="usersSearch" type="text" placeholder="Buscar por nombre, usuario o correo">
                <button type="button" class="admin-config-btn primary toolbar-btn" data-action="add-user"><span data-lucide="user-plus"></span><span>Agregar</span></button>
              </div>
              <div id="usersList" class="listbox custom-list" role="listbox" aria-label="Usuarios" tabindex="0"></div>
            </div>
          </div>
        </form>
      </section>
    </template>
    <template id="adma-user-edit-template">
      <section class="admin-config" aria-label="Actualizar información de usuario">
        <header class="admin-config-header">
          <h2>Actualizar información</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
            <button type="button" class="admin-config-btn primary" data-action="save-user"><span data-lucide="save"></span><span>Grabar</span></button>
          </div>
        </header>
        <form class="admin-form" id="editUserForm">
          <div class="form-grid two">
            <div class="form-field">
              <label for="userUsername">Nombre de usuario</label>
              <input id="userUsername" type="text" readonly>
            </div>
            <div class="form-field">
              <label for="userFirstName">Nombre</label>
              <input id="userFirstName" type="text" required>
            </div>
            <div class="form-field">
              <label for="userLastName">Apellido</label>
              <input id="userLastName" type="text" required>
            </div>
            <div class="form-field">
              <label for="userEmail">Dirección de correo</label>
              <input id="userEmail" type="email" required>
            </div>
            <div class="form-field">
              <label for="userPhone">Numero de teléfono</label>
              <input id="userPhone" type="tel">
            </div>
            <div class="form-field">
              <label for="userLocation">Ubicación</label>
              <select id="userLocation"></select>
            </div>
            <div class="form-field">
              <label for="userDept">Departamento</label>
              <select id="userDept"></select>
            </div>
            <div class="form-field">
              <label for="userLanguage">Idioma</label>
              <select id="userLanguage">
                <option value="es">Spanish (Español)</option>
                <option value="en">English</option>
              </select>
            </div>
          </div>
          <div class="form-grid two">
            <div class="form-field" style="grid-column:1 / -1">
              <div class="section-subtitle">Representante de soporte</div>
            </div>
            <div class="form-field">
              <label for="userSupportRep">Habilitar</label>
              <input id="userSupportRep" type="checkbox">
            </div>
            <div class="form-field">
              <label for="userAccessLevel">Nivel de acceso</label>
              <select id="userAccessLevel">
                <option value="normal">Normal</option>
                <option value="restricted">Restringido</option>
                <option value="read-only">Solo lectura</option>
              </select>
            </div>
          </div>
          <div class="form-grid two">
            <div class="form-field" style="grid-column:1 / -1">
              <div class="section-subtitle">Contraseña</div>
            </div>
            <div class="form-field">
              <label for="userPassNew">Nueva contraseña</label>
              <input id="userPassNew" type="password">
            </div>
            <div class="form-field">
              <label for="userPassConfirm">Confirme la contraseña</label>
              <input id="userPassConfirm" type="password">
            </div>
          </div>
          <div class="form-actions" style="text-align:center">
            <button type="button" class="danger-btn" data-action="delete-user">Borrar cuenta</button>
          </div>
        </form>
      </section>
    </template>
    <template id="adma-user-create-template">
      <section class="admin-config" aria-label="Agregar usuarios nuevos">
        <header class="admin-config-header">
          <h2>Agregar usuarios nuevos</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
            <button type="button" class="admin-config-btn primary" data-action="create-user"><span data-lucide="save"></span><span>Grabar</span></button>
          </div>
        </header>
        <form class="admin-form" id="createUserForm">
          <div class="form-grid two">
            <div class="form-field">
              <label for="newUserUsername">Nombre de usuario</label>
              <input id="newUserUsername" type="text" required>
            </div>
            <div class="form-field">
              <label for="newUserFirstName">Nombre</label>
              <input id="newUserFirstName" type="text" required>
            </div>
            <div class="form-field">
              <label for="newUserLastName">Apellido</label>
              <input id="newUserLastName" type="text" required>
            </div>
            <div class="form-field">
              <label for="newUserEmail">Dirección de correo</label>
              <input id="newUserEmail" type="email" required>
            </div>
            <div class="form-field">
              <label for="newUserPhone">Numero de teléfono</label>
              <input id="newUserPhone" type="tel">
            </div>
            <div class="form-field">
              <label for="newUserLocation">Ubicación</label>
              <select id="newUserLocation"></select>
            </div>
            <div class="form-field">
              <label for="newUserDept">Departamento</label>
              <select id="newUserDept"></select>
            </div>
            <div class="form-field">
              <label for="newUserLanguage">Idioma</label>
              <select id="newUserLanguage">
                <option value="es">Spanish (Español)</option>
                <option value="en">English</option>
              </select>
            </div>
          </div>
          <div class="form-grid two">
            <div class="form-field" style="grid-column:1 / -1">
              <div class="section-subtitle">Representante de soporte</div>
            </div>
            <div class="form-field">
              <label for="newUserSupportRep">Habilitar</label>
              <input id="newUserSupportRep" type="checkbox">
            </div>
            <div class="form-field">
              <label for="newUserAccessLevel">Nivel de acceso</label>
              <select id="newUserAccessLevel">
                <option value="normal">Normal</option>
                <option value="restricted">Restringido</option>
                <option value="read-only">Solo lectura</option>
              </select>
            </div>
          </div>
          <div class="form-grid two">
            <div class="form-field" style="grid-column:1 / -1">
              <div class="section-subtitle">Contraseña</div>
            </div>
            <div class="form-field">
              <label for="newUserPass">Nueva contraseña</label>
              <input id="newUserPass" type="password">
            </div>
            <div class="form-field">
              <label for="newUserPassConfirm">Confirme la contraseña</label>
              <input id="newUserPassConfirm" type="password">
            </div>
          </div>
        </form>
      </section>
    </template>
    <template id="adma-categories-template">
      <section class="admin-config" aria-label="Administrar categorías">
        <header class="admin-config-header">
          <h2>Categorías</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
          </div>
        </header>
        <form class="admin-form" id="categoriesForm" novalidate>
          <div class="form-grid two">
            <div class="form-field" style="grid-column:1 / -1">
              <label for="categoriesSearch">Buscar</label>
              <input id="categoriesSearch" type="text" placeholder="Filtrar por nombre o representante">
            </div>
          </div>
          <div class="form-grid one">
            <div class="form-field" style="grid-column:1 / -1">
              <table class="admin-table" aria-label="Listado de categorías">
                <thead>
                  <tr>
                    <th>Categoria</th>
                    <th>Representante</th>
                    <th>Modificar</th>
                  </tr>
                </thead>
                <tbody id="categoriesTableBody"></tbody>
              </table>
            </div>
          </div>
          <div class="form-actions" style="text-align:center">
            <button type="button" class="admin-config-btn primary" data-action="add-category"><span data-lucide="plus"></span><span>Agregar nueva categoría</span></button>
          </div>
        </form>
      </section>
    </template>
    <template id="adma-category-edit-template">
      <section class="admin-config" aria-label="Editar categoría">
        <header class="admin-config-header">
          <h2>Editar categoría</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
            <button type="button" class="admin-config-btn primary" data-action="save-category"><span data-lucide="save"></span><span>Grabar</span></button>
          </div>
        </header>
        <form class="admin-form" id="editCategoryForm" novalidate>
          <div class="form-grid two">
            <div class="form-field">
              <label for="catName">Nombre de la categoría</label>
              <input id="catName" type="text" required>
            </div>
            <div class="form-field">
              <label for="catRep">Representante</label>
              <input id="catRep" type="text" list="catRepList" placeholder="Usuario responsable">
              <datalist id="catRepList"></datalist>
            </div>
          </div>
          <div class="form-actions" style="text-align:center">
            <button type="button" class="danger-btn" data-action="delete-category">Borrar</button>
          </div>
        </form>
      </section>
    </template>
    <template id="adma-category-create-template">
      <section class="admin-config" aria-label="Agregar categoría">
        <header class="admin-config-header">
          <h2>Agregar categoría</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
            <button type="button" class="admin-config-btn primary" data-action="create-category"><span data-lucide="save"></span><span>Grabar</span></button>
          </div>
        </header>
        <form class="admin-form" id="createCategoryForm" novalidate>
          <div class="form-grid two">
            <div class="form-field">
              <label for="newCatName">Nombre de la categoría</label>
              <input id="newCatName" type="text" required>
            </div>
            <div class="form-field">
              <label for="newCatRep">Representante</label>
              <input id="newCatRep" type="text" list="catRepList" placeholder="Usuario responsable">
              <datalist id="catRepList"></datalist>
            </div>
          </div>
        </form>
      </section>
    </template>
    <template id="adma-departments-template">
      <section class="admin-config" aria-label="Administrar departamentos">
        <header class="admin-config-header">
          <h2>Departamentos</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
          </div>
        </header>
        <form class="admin-form" id="departmentsForm" novalidate>
          <div class="form-grid one">
            <div class="form-field" style="grid-column:1 / -1">
              <label for="departmentsSearch">Buscar</label>
              <div class="users-toolbar">
                <input id="departmentsSearch" type="text" placeholder="Filtrar por nombre de departamento">
                <button type="button" class="admin-config-btn primary toolbar-btn" data-action="add-department"><span data-lucide="plus"></span><span>Agregar</span></button>
              </div>
            </div>
          </div>
          <div class="form-grid one">
            <div class="form-field" style="grid-column:1 / -1">
              <table class="admin-table" aria-label="Listado de departamentos">
                <thead>
                  <tr>
                    <th>Departamento</th>
                  </tr>
                </thead>
                <tbody id="departmentsTableBody"></tbody>
              </table>
            </div>
          </div>
        </form>
      </section>
    </template>
    <template id="adma-department-edit-template">
      <section class="admin-config" aria-label="Editar departamento">
        <header class="admin-config-header">
          <h2>Editar departamento</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
            <button type="button" class="admin-config-btn primary" data-action="save-department"><span data-lucide="save"></span><span>Grabar</span></button>
          </div>
        </header>
        <form class="admin-form" id="editDepartmentForm" novalidate>
          <div class="form-grid two">
            <div class="form-field">
              <label for="deptName">Nombre del departamento</label>
              <input id="deptName" type="text" required>
            </div>
          </div>
          <div class="form-actions" style="text-align:center">
            <button type="button" class="danger-btn" data-action="delete-department">Borrar</button>
          </div>
        </form>
      </section>
    </template>
    <template id="adma-department-create-template">
      <section class="admin-config" aria-label="Agregar departamento">
        <header class="admin-config-header">
          <h2>Agregar departamento</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
            <button type="button" class="admin-config-btn primary" data-action="create-department"><span data-lucide="save"></span><span>Grabar</span></button>
          </div>
        </header>
        <form class="admin-form" id="createDepartmentForm" novalidate>
          <div class="form-grid two">
            <div class="form-field">
              <label for="newDeptName">Nombre del departamento</label>
              <input id="newDeptName" type="text" required>
            </div>
          </div>
        </form>
      </section>
    </template>
    <template id="adma-priorities-template">
      <section class="admin-config" aria-label="Administrar prioridades">
        <header class="admin-config-header">
          <h2>Prioridades</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
          </div>
        </header>
        <form class="admin-form" id="prioritiesForm" novalidate>
          <div class="form-grid one">
            <div class="form-field" style="grid-column:1 / -1">
              <label for="prioritiesSearch">Buscar</label>
              <div class="users-toolbar">
                <input id="prioritiesSearch" type="text" placeholder="Filtrar por nombre o color">
                <button type="button" class="admin-config-btn primary toolbar-btn" data-action="add-priority"><span data-lucide="plus"></span><span>Agregar</span></button>
              </div>
            </div>
          </div>
          <div class="form-grid one">
            <div class="form-field" style="grid-column:1 / -1">
              <table class="admin-table" aria-label="Listado de prioridades">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Prioridad</th>
                  </tr>
                </thead>
                <tbody id="prioritiesTableBody"></tbody>
              </table>
            </div>
          </div>
        </form>
      </section>
    </template>
    <template id="adma-priority-edit-template">
      <section class="admin-config" aria-label="Editar prioridad">
        <header class="admin-config-header">
          <h2>Editar prioridad</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
            <button type="button" class="admin-config-btn primary" data-action="save-priority"><span data-lucide="save"></span><span>Grabar</span></button>
          </div>
        </header>
        <form class="admin-form" id="editPriorityForm" novalidate>
          <div class="form-grid two">
            <div class="form-field">
              <label for="priorityName">Nombre</label>
              <input id="priorityName" type="text" required>
            </div>
            <div class="form-field">
              <label for="priorityColor">Color</label>
              <input id="priorityColor" type="color">
            </div>
            
          </div>
        <div class="form-actions" style="text-align:center">
          <button type="button" class="danger-btn" data-action="delete-priority">Borrar</button>
        </div>
        </form>
      </section>
    </template>
    <template id="adma-priority-create-template">
      <section class="admin-config" aria-label="Agregar prioridad">
        <header class="admin-config-header">
          <h2>Agregar prioridad</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
            <button type="button" class="admin-config-btn primary" data-action="create-priority"><span data-lucide="save"></span><span>Grabar</span></button>
          </div>
        </header>
        <form class="admin-form" id="createPriorityForm" novalidate>
          <div class="form-grid two">
            <div class="form-field">
              <label for="newPriorityName">Nombre</label>
              <input id="newPriorityName" type="text" required>
            </div>
            <div class="form-field">
              <label for="newPriorityColor">Color</label>
              <input id="newPriorityColor" type="color">
            </div>
            
          </div>
        </form>
      </section>
    </template>
    <template id="adma-states-template">
      <section class="admin-config" aria-label="Administrar estados">
        <header class="admin-config-header states">
          <h2>Estados</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
            <button type="button" class="admin-config-btn primary" data-action="add-state"><span data-lucide="plus"></span><span>Agregar</span></button>
          </div>
        </header>
        <form class="admin-form" id="statesForm" novalidate>
          <div class="form-grid one">
            <div class="form-field" style="grid-column:1 / -1">
              <table class="admin-table" aria-label="Listado de estados">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Estado</th>
                    <th>Modificar</th>
                  </tr>
                </thead>
                <tbody id="statesTableBody"></tbody>
              </table>
            </div>
          </div>
        </form>
      </section>
    </template>
    <template id="adma-state-edit-template">
      <section class="admin-config" aria-label="Editar estado">
        <header class="admin-config-header">
          <h2>Editar estado</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
            <button type="button" class="admin-config-btn primary" data-action="save-state"><span data-lucide="save"></span><span>Grabar</span></button>
          </div>
        </header>
        <form class="admin-form" id="editStateForm" novalidate>
          <div class="form-grid two">
            <div class="form-field">
              <label for="stateName">Nombre del estado</label>
              <input id="stateName" type="text" required>
            </div>
            <div class="form-field">
              <label for="stateClosed">Estado cerrado</label>
              <input id="stateClosed" type="checkbox">
            </div>
          </div>
          <div class="form-actions" style="text-align:center">
            <button type="button" class="danger-btn" data-action="delete-state">Borrar</button>
          </div>
        </form>
      </section>
    </template>
    <template id="adma-state-create-template">
      <section class="admin-config" aria-label="Agregar estado">
        <header class="admin-config-header">
          <h2>Agregar estado</h2>
          <div class="admin-config-actions">
            <button type="button" class="admin-config-btn" data-action="back"><span data-lucide="arrow-left"></span><span>Volver</span></button>
            <button type="button" class="admin-config-btn primary" data-action="create-state"><span data-lucide="save"></span><span>Grabar</span></button>
          </div>
        </header>
        <form class="admin-form" id="createStateForm" novalidate>
          <div class="form-grid two">
            <div class="form-field">
              <label for="newStateName">Nombre del estado</label>
              <input id="newStateName" type="text" required>
            </div>
            <div class="form-field">
              <label for="newStateClosed">Estado cerrado</label>
              <input id="newStateClosed" type="checkbox">
            </div>
          </div>
        </form>
      </section>
    </template>
    <!-- Plantilla HTML editable del Dashboard removida de index -->

    
      
    
  
    <div id="root"></div>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <!-- Librerías del dashboard removidas en index -->
    <script>window.global = window;</script>
    <!-- Componente de menú reusable -->
    <script src="../src/menu.js?v=20241125-1"></script>
    <!-- Lógica del dashboard -->
    <script src="../src/app.js?v=20241125-1"></script>
    <!-- App principal -->
    <script src="../src/main.js?v=20241125-1"></script>
    <script src="../src/fab.js?v=20241125-1"></script>
  </body>
</html>
